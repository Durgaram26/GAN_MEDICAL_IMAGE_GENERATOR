{% extends "base.html" %}
{% block content %}
  <div class="glass-card p-8 rounded-lg shadow-2xl transition-all duration-300 hover:shadow-blue-200/20">
    <div class="flex items-center mb-6">
      <svg class="h-10 w-10 text-blue-500" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M3 7V5C3 3.89543 3.89543 3 5 3H7M17 3H19C20.1046 3 21 3.89543 21 5V7M21 17V19C21 20.1046 20.1046 21 19 21H17M7 21H5C3.89543 21 3 20.1046 3 19V17M9 12L9.01 12M12 15L12.01 15M15 12L15.01 12M12 9L12.01 9M14 6.5L17.5 10L14 13.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <h1 class="text-3xl font-bold ml-4 text-gray-800">Image Upscaler</h1>
    </div>
    
    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg mb-8 border border-blue-100">
      <p class="text-gray-700">
        Enhance your images with AI-powered upscaling. Select a trained super-resolution model or use the default upscaler.
      </p>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
      <!-- Upscale Settings Form -->
      <div class="bg-white p-6 rounded-lg shadow-md border border-gray-100">
        <h2 class="text-xl font-bold mb-4 text-gray-800 flex items-center">
          <svg class="h-6 w-6 mr-2 text-blue-500" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M7 16V4M7 4L3 8M7 4L11 8M17 8V20M17 20L21 16M17 20L13 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Upscale Settings
        </h2>
        
        <form action="{{ url_for('upscale') }}" method="post" enctype="multipart/form-data" class="space-y-5">
          <div>
            <label class="block text-gray-700 font-medium mb-2">Upload Image</label>
            <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 hover:border-blue-400 transition-colors">
              <input type="file" name="up_image" accept="image/*" required class="w-full" />
            </div>
          </div>
          
          <div>
            <label class="block text-gray-700 font-medium mb-2">Upscaling Model</label>
            <select name="model_name" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all">
              <option value="">Default Upscaler</option>
              {% for name, model in models.items() %}
                {% if model.model_type in ["ESRGAN", "SRGAN"] %}
                  <option value="{{ name }}">{{ name }} ({{ model.model_type }})</option>
                {% endif %}
              {% endfor %}
            </select>
            <p class="text-sm text-gray-500 mt-1">Select a trained super-resolution model for AI-powered upscaling</p>
          </div>
          
          <div>
            <label class="block text-gray-700 font-medium mb-2">Upscale Factor</label>
            <div class="flex items-center">
              <input type="range" name="scale_factor" min="2" max="4" value="2" step="1" class="w-full mr-3"
                     oninput="this.nextElementSibling.value = this.value" />
              <output class="bg-gray-100 px-3 py-1 rounded-lg min-w-10 text-center">2</output>
            </div>
          </div>
          
          <button type="submit" class="w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:shadow-blue-500/50 transition-all flex items-center justify-center">
            <svg class="h-5 w-5 mr-2" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Process Image
          </button>
        </form>
      </div>
      
      <!-- Upscaled Image Result -->
      <div class="bg-white p-6 rounded-lg shadow-md border border-gray-100">
        <h2 class="text-xl font-bold mb-4 text-gray-800 flex items-center">
          <svg class="h-6 w-6 mr-2 text-blue-500" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4 16L8.58579 11.4142C9.36683 10.6332 10.6332 10.6332 11.4142 11.4142L16 16M14 14L15.5858 12.4142C16.3668 11.6332 17.6332 11.6332 18.4142 12.4142L20 14M14 8H14.01M6 20H18C19.1046 20 20 19.1046 20 18V6C20 4.89543 19.1046 4 18 4H6C4.89543 4 4 4.89543 4 6V18C4 19.1046 4.89543 20 6 20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Result
        </h2>
        
        <div class="min-h-64 flex items-center justify-center rounded-lg overflow-hidden">
          {% if result_image %}
            <div class="w-full">
              <img src="data:image/png;base64,{{ result_image }}" alt="Upscaled Image" class="w-full rounded-lg shadow">
              <div class="flex justify-end mt-3">
                <a href="data:image/png;base64,{{ result_image }}" download="upscaled_image.png" class="text-blue-500 hover:text-blue-700 font-medium flex items-center">
                  <svg class="h-5 w-5 mr-1" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 16L4 17C4 18.6569 5.34315 20 7 20L17 20C18.6569 20 20 18.6569 20 17L20 16M16 12L12 16M12 16L8 12M12 16L12 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                  Download
                </a>
              </div>
            </div>
          {% else %}
            <div class="text-center text-gray-500">
              <svg class="h-16 w-16 mx-auto mb-4 text-gray-300" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M4 16L8.58579 11.4142C9.36683 10.6332 10.6332 10.6332 11.4142 11.4142L16 16M14 14L15.5858 12.4142C16.3668 11.6332 17.6332 11.6332 18.4142 12.4142L20 14M14 8H14.01M6 20H18C19.1046 20 20 19.1046 20 18V6C20 4.89543 19.1046 4 18 4H6C4.89543 4 4 4.89543 4 6V18C4 19.1046 4.89543 20 6 20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              <p>Upload and process an image to see the result here</p>
            </div>
          {% endif %}
        </div>
      </div>
    </div>
    
    <div class="mt-8 flex justify-between">
      <a href="{{ url_for('index') }}" class="text-gray-500 hover:text-gray-700 font-medium flex items-center">
        <svg class="h-5 w-5 mr-1" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M11 17L6 12M6 12L11 7M6 12H18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        Back to Home
      </a>
      <div class="flex space-x-4">
        <a href="{{ url_for('generate_images') }}" class="text-indigo-500 hover:text-indigo-700 font-medium flex items-center">
          <svg class="h-5 w-5 mr-1" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 9V12M12 12V15M12 12H15M12 12H9M17 21H7C4.79086 21 3 19.2091 3 17V7C3 4.79086 4.79086 3 7 3H17C19.2091 3 21 4.79086 21 7V17C21 19.2091 19.2091 21 17 21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          Generate Images
        </a>
        <a href="{{ url_for('model_analysis') }}" class="text-blue-500 hover:text-blue-700 font-medium flex items-center">
          <svg class="h-5 w-5 mr-1" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M7 12L10 15L17 8M8 5.5L12 2L16 5.5M3 12.5H5C5.55228 12.5 6 12.9477 6 13.5V19.5C6 20.0523 5.55228 20.5 5 20.5H3C2.44772 20.5 2 20.0523 2 19.5V13.5C2 12.9477 2.44772 12.5 3 12.5ZM11 12.5H13C13.5523 12.5 14 12.9477 14 13.5V19.5C14 20.0523 13.5523 20.5 13 20.5H11C10.4477 20.5 10 20.0523 10 19.5V13.5C10 12.9477 10.4477 12.5 11 12.5ZM19 12.5H21C21.5523 12.5 22 12.9477 22 13.5V19.5C22 20.0523 21.5523 20.5 21 20.5H19C18.4477 20.5 18 20.0523 18 19.5V13.5C18 12.9477 18.4477 12.5 19 12.5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Model Analysis
        </a>
      </div>
    </div>
  </div>
{% endblock %}
